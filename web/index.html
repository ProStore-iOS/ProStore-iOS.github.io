<!DOCTYPE html>
<html>
  <head>
    <title>ProStore Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <style>
      .sidebar-item.active{
  color: var(--text);
  background: linear-gradient(90deg, rgba(78,229,255,0.04), rgba(139,92,246,0.03));
  border-color: rgba(78,229,255,0.08);
  box-shadow: 0 6px 18px rgba(78,229,255,0.03);
}
    </style>
    <script src="installer.js"></script>
  </head>
  <body>
      <div class="content-area">
<button class="hamburger" aria-label="Toggle sidebar" aria-expanded="false">
  <svg width="22" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <rect width="22" height="2" rx="1" fill="currentColor"/>
    <rect y="7" width="22" height="2" rx="1" fill="currentColor"/>
    <rect y="14" width="22" height="2" rx="1" fill="currentColor"/>
  </svg>
</button>
        <div class="sidebar">
          <div onclick="window.location.href = 'index.html';" class="sidebar-item">ProStore Installer</div>
          <div onclick="window.location.href = 'cert.html';" class="sidebar-item">Certificate Manager & Status</div>
          <div onclick="window.location.href = 'converter.html';" class="sidebar-item">Certificate Converter</div>
        </div>

        <div class="panel">
          <h1 class="title">ProStore Installer</h1><br>
          <img class="logo-img" src="https://github.com/ProStore-iOS/ProStore/raw/main/icon.png"><br>

          <!-- Download button (visible initially) -->
          <button class="download-button" onclick="startDownload();">Download</button>

          <!-- Install button (hidden until download completes) -->
          <button class="install-button" onclick="performInstall();" style="display:none;">Install</button><br>

          <a class="advanced-href" href="advanced_installer.html">Advanced Installer</a>
        </div>
      </div>
    <script>
      pulse('reset');
      loadingImg(0);

      // SIDEBAR TOGGLE \\
(function(){
  const body = document.body;
  const hamburger = document.querySelector('.hamburger');
  if(!hamburger) return;
  // create overlay node (used on mobile)
  let overlay = document.querySelector('.sidebar-overlay');
  if(!overlay){
    overlay = document.createElement('div');
    overlay.className = 'sidebar-overlay';
    document.body.appendChild(overlay);
  }

  function openSidebar(){
    body.classList.add('sidebar-open');
    hamburger.setAttribute('aria-expanded','true');
    // trap focus simple-ish - set focus to first sidebar item
    const firstItem = document.querySelector('.sidebar .sidebar-item');
    if(firstItem) firstItem.focus();
  }
  function closeSidebar(){
    body.classList.remove('sidebar-open');
    hamburger.setAttribute('aria-expanded','false');
    hamburger.focus();
  }
  function toggleSidebar(){
    if(body.classList.contains('sidebar-open')) closeSidebar();
    else openSidebar();
  }

  hamburger.addEventListener('click', function(e){
    e.stopPropagation();
    toggleSidebar();
  });

  overlay.addEventListener('click', function(){
    closeSidebar();
  });

  // close on escape
  document.addEventListener('keydown', function(e){
    if(e.key === 'Escape' && body.classList.contains('sidebar-open')){
      closeSidebar();
    }
  });

  // If a sidebar item is clicked on mobile, auto-close (and navigate)
  document.addEventListener('click', function(e){
    const item = e.target.closest('.sidebar-item');
    if(!item) return;
    // only auto-close on small screens (avoid closing on desktop)
    if(window.innerWidth <= 860) {
      // Slight delay to allow navigation/href to trigger
      setTimeout(closeSidebar, 160);
    }
  });

  // ensure state updates on resize (e.g., when rotating device)
  window.addEventListener('resize', function(){
    if(window.innerWidth > 860) {
      // ensure sidebar visible on desktop
      body.classList.remove('sidebar-open');
      hamburger.setAttribute('aria-expanded','false');
    }
  });
})();

    </script>
  </body>
</html>
