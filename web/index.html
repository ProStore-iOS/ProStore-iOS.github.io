<!DOCTYPE html>
<html>
  <head>
    <title>ProStore Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <script src="installer.js"></script>
  </head>
  <body>
      <div class="content-area">
        <div class="sidebar-container">
        <div class="sidebar">
          <div onclick="window.location.href = 'index.html';" class="sidebar-item active">ProStore Installer</div>
          <div onclick="window.location.href = 'cert.html';" class="sidebar-item">Certificate Manager</div>
          <div onclick="window.location.href = 'converter.html';" class="sidebar-item">Certificate Converter</div>
        </div>
        </div>

        <div class="panel">
          <h1 class="title">ProStore Installer</h1><br>
          <img class="logo-img" src="https://github.com/ProStore-iOS/ProStore/raw/main/icon.png"><br>

          <!-- Download button (visible initially) -->
          <button class="download-button" onclick="startDownload();">Download</button>

          <!-- Install button (hidden until download completes) -->
          <button class="install-button" onclick="performInstall();" style="display:none;">Install</button><br>

          <a class="advanced-href" href="advanced_installer.html">Advanced Installer</a>
        </div>
      </div>
    <script>
      pulse('reset');
      loadingImg(0);
    </script>
    <script>
  (function() {
    // run only if the elements exist
    const container = document.querySelector('.sidebar-container');
    const sidebar = container?.querySelector('.sidebar');

    if (!container || !sidebar) return;

    // tiny threshold to avoid fractional-pixel issues
    const THRESH = 1;

    function updateGradientState() {
      // if no horizontal overflow, mark no-overflow
      if (sidebar.scrollWidth <= sidebar.clientWidth + THRESH) {
        container.classList.add('no-overflow');
        container.classList.remove('scrolled-end');
        return;
      } else {
        container.classList.remove('no-overflow');
      }

      // if scrolled to the far right, hide gradient
      if (sidebar.scrollLeft + sidebar.clientWidth >= sidebar.scrollWidth - THRESH) {
        container.classList.add('scrolled-end');
      } else {
        container.classList.remove('scrolled-end');
      }
    }

    // listen to scroll + resize + orientation changes
    sidebar.addEventListener('scroll', updateGradientState, { passive: true });
    window.addEventListener('resize', updateGradientState);
    window.addEventListener('orientationchange', updateGradientState);

    // run initial check once DOM is ready
    document.addEventListener('DOMContentLoaded', updateGradientState);
    // also run immediately in case script is after DOM
    updateGradientState();
  })();
</script>

  </body>
</html>
